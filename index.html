<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblia Neon - Versículo del Día</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a1a, #1a0a1a);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 40, 80, 0.15) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 80, 40, 0.15) 0%, transparent 20%);
        }
        
        .header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            position: relative;
        }
        
        .title {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(45deg, #00ffff, #00ff00, #ff0000);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.5),
                0 0 20px rgba(0, 255, 255, 0.3),
                0 0 30px rgba(0, 255, 255, 0.2);
            animation: glow 2s infinite alternate;
            position: relative;
            z-index: 2;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 20px;
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            gap: 20px;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            background: rgba(10, 20, 40, 0.7);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 100, 255, 0.3);
            position: sticky;
            top: 20px;
            z-index: 10;
        }
        
        .select-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #66ccff;
            font-size: 0.9rem;
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 20, 40, 0.8);
            color: #fff;
            border: 1px solid #00aaff;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        select:focus, input:focus {
            border-color: #00ffaa;
            box-shadow: 0 0 15px rgba(0, 255, 170, 0.5);
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 25px;
            background: rgba(0, 30, 60, 0.8);
            color: #66ccff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background: rgba(0, 80, 160, 0.8);
            box-shadow: 0 0 15px rgba(0, 150, 255, 0.7);
            color: #fff;
        }
        
        .bible-display {
            background: rgba(10, 20, 40, 0.6);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 
                0 0 30px rgba(0, 150, 255, 0.3),
                inset 0 0 10px rgba(0, 100, 200, 0.2);
            overflow-y: auto;
            min-height: 60vh;
            max-height: 65vh;
        }
        
        .chapter-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 150, 255, 0.3);
        }
        
        .chapter-title {
            font-size: 2rem;
            margin-bottom: 5px;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }
        
        .chapter-subtitle {
            color: #66ccff;
            font-size: 1.1rem;
        }
        
        .verse {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: rgba(0, 15, 30, 0.4);
            display: flex; /* Añadido para alinear número y texto */
            align-items: flex-start; /* Alinea el número en la parte superior del texto */
        }
        
        .verse:hover {
            background: rgba(0, 30, 60, 0.6);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 100, 255, 0.4);
        }
        
        .verse-number {
            font-weight: bold;
            margin-right: 8px;
            font-size: 1.1rem;
            min-width: 40px;
            text-align: right;
            color: #00ffaa; /* Color para los números de versículo */
            text-shadow: 0 0 8px rgba(0, 255, 170, 0.5);
        }
        
        .verse-text {
            font-size: 1.2rem;
            line-height: 1.7;
            flex-grow: 1; /* Permite que el texto ocupe el espacio restante */
        }
        
        .neon-blue {
            color: #66ccff;
            text-shadow: 
                0 0 5px rgba(0, 200, 255, 0.8),
                0 0 15px rgba(0, 150, 255, 0.6),
                0 0 25px rgba(0, 100, 255, 0.4);
        }
        
        .neon-green {
            color: #66ff99;
            text-shadow: 
                0 0 5px rgba(100, 255, 150, 0.8),
                0 0 15px rgba(0, 255, 150, 0.6),
                0 0 25px rgba(0, 200, 100, 0.4);
        }
        
        .neon-red {
            color: #ff6699;
            text-shadow: 
                0 0 5px rgba(255, 100, 150, 0.8),
                0 0 15px rgba(255, 0, 100, 0.6),
                0 0 25px rgba(200, 0, 50, 0.4);
        }
        
        .footer {
            text-align: center;
            padding: 25px 0;
            margin-top: 30px;
            color: #66ccff;
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 100, 200, 0.3);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap; /* Added for responsiveness */
        }
        
        .stat-item {
            background: rgba(0, 30, 60, 0.5);
            padding: 15px;
            border-radius: 10px;
            min-width: 150px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            margin-top: 5px;
            color: #00ffaa;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.5);
        }
        
        @keyframes glow {
            0% {
                text-shadow: 
                    0 0 10px rgba(0, 255, 255, 0.5),
                    0 0 20px rgba(0, 255, 255, 0.3),
                    0 0 30px rgba(0, 255, 255, 0.2);
            }
            100% {
                text-shadow: 
                    0 0 15px rgba(0, 255, 255, 0.7),
                    0 0 25px rgba(0, 255, 255, 0.5),
                    0 0 40px rgba(0, 255, 255, 0.3);
            }
        }
        
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .book-card {
            background: rgba(0, 30, 60, 0.5);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 150, 255, 0.3);
        }
        
        .book-card:hover {
            background: rgba(0, 60, 120, 0.7);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 150, 255, 0.4);
        }
        
        .book-name {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .book-chapters {
            color: #66ccff;
            font-size: 0.9rem;
        }
        
        .testament-header {
            font-size: 1.5rem;
            margin: 25px 0 15px;
            color: #00ffaa;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.5);
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 150, 255, 0.3);
        }
        
        .search-container {
            position: relative;
            flex: 2; /* Allow search input to take more space */
            min-width: 250px;
        }
        
        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #66ccff;
        }
        
        .search-container input {
            padding-left: 40px;
        }
        
        /* Nuevos estilos para el versículo del día */
        .daily-verse-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid gold;
            border-radius: 50px;
            padding: 8px 15px;
            font-size: 0.9rem;
            color: gold;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        
        .daily-verse-highlight {
            animation: highlight 1.5s ease-in-out;
            background: rgba(255, 215, 0, 0.15);
            border-left: 3px solid gold;
        }
        
        @keyframes highlight {
            0% { background: rgba(255, 215, 0, 0); border-left: 3px solid transparent; }
            50% { background: rgba(255, 215, 0, 0.3); border-left: 3px solid gold; }
            100% { background: rgba(255, 215, 0, 0.15); border-left: 3px solid gold; }
        }
        
        .daily-verse-title {
            font-size: 1.8rem;
            color: gold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            margin-bottom: 15px;
        }
        
        .daily-verse-subtitle {
            color: #ffcc00;
            font-size: 1.1rem;
            margin-bottom: 25px;
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .navigation {
                flex-wrap: wrap;
            }
            
            .verse-text {
                font-size: 1.1rem;
            }
            
            .book-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .daily-verse-indicator {
                position: static;
                margin: 15px auto;
                width: fit-content;
            }

            .select-group, .search-container {
                min-width: unset; /* Reset min-width for smaller screens */
                width: 100%; /* Take full width on smaller screens */
            }
        }
    </style>
     <!-- Cargar los datos completos de la Biblia -->
<!-- Primero carga verseData.js -->
    <script src="verseData.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Biblia Neon</h1>
            <p class="subtitle">La Palabra de Dios con un toque moderno - 66 libros completos con todos los versículos</p>
            <div class="daily-verse-indicator" id="daily-verse-indicator">
                <i class="fas fa-calendar-day"></i>
                <span id="daily-verse-label">Hoy aún no has visto el versículo del día</span>
            </div>
        </div>
        
        <div class="app-container">
            <div class="controls">
                <div class="select-group">
                    <label for="testament-select">Testamento:</label>
                    <select id="testament-select">
                        <option value="old">Antiguo Testamento</option>
                        <option value="new">Nuevo Testamento</option>
                    </select>
                </div>
                
                <div class="select-group">
                    <label for="book-select">Libro:</label>
                    <select id="book-select"></select>
                </div>
                
                <div class="select-group">
                    <label for="chapter-select">Capítulo:</label>
                    <select id="chapter-select"></select>
                </div>
                
                <div class="select-group">
                    <label for="verse-select">Versículo:</label>
                    <input type="number" id="verse-select" min="1" value="1" placeholder="Número de versículo">
                </div>
                
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Buscar Palabra">
                </div>
                
                <div class="navigation">
                    <button id="prev-btn" class="nav-btn">
                        <i class="fas fa-arrow-left"></i> Anterior
                    </button>
                    <button id="next-btn" class="nav-btn">
                        Siguiente <i class="fas fa-arrow-right"></i>
                    </button>
                    <button id="random-btn" class="nav-btn">
                        <i class="fas fa-random"></i> Aleatorio
                    </button>
                    <button id="today-btn" class="nav-btn">
                        <i class="fas fa-calendar-day"></i> Hoy
                    </button>
                </div>
            </div>
            
            <div class="bible-display" id="bible-display">
                <div class="chapter-header">
                    <h2 class="chapter-title neon-blue" id="chapter-title">Versículo del Día</h2>
                    <p class="chapter-subtitle" id="chapter-subtitle">La Palabra de Dios para hoy</p>
                </div>
                
                <div id="verses-container">
                    </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div>Libros</div>
                <div class="stat-value">66</div>
            </div>
            <div class="stat-item">
                <div>Capítulos</div>
                <div class="stat-value">1,189</div>
            </div>
            <div class="stat-item">
                <div>Versículos</div>
                <div class="stat-value">31,102</div>
            </div>
        </div>
        
        <div class="footer">
            <p>Biblia Neon - Reina Valera 1960 | Todos los derechos reservados</p>
            <p>Diseñado con ❤️ para compartir la Palabra de Dios</p>
        </div>
    </div>

    <script>
        // Datos de la Biblia (estructura completa con número de capítulos)
        const bibleData = {
            oldTestament: [
                {name: "Génesis", chapters: 50, subtitle: "El libro de los orígenes"},
                {name: "Éxodo", chapters: 40, subtitle: "La salida de Egipto"},
                {name: "Levítico", chapters: 27, subtitle: "Leyes de santidad y adoración"},
                {name: "Números", chapters: 36, subtitle: "El censo en el desierto"},
                {name: "Deuteronomio", chapters: 34, subtitle: "La segunda ley"},
                {name: "Josué", chapters: 24, subtitle: "La conquista de Canaán"},
                {name: "Jueces", chapters: 21, subtitle: "Los libertadores de Israel"},
                {name: "Rut", chapters: 4, subtitle: "La historia de lealtad"},
                {name: "1 Samuel", chapters: 31, subtitle: "Samuel y Saúl"},
                {name: "2 Samuel", chapters: 24, subtitle: "El reinado de David"},
                {name: "1 Reyes", chapters: 22, subtitle: "La monarquía dividida"},
                {name: "2 Reyes", chapters: 25, subtitle: "La caída de los reinos"},
                {name: "1 Crónicas", chapters: 29, subtitle: "Genealogías y David"},
                {name: "2 Crónicas", chapters: 36, subtitle: "Historia de Judá"},
                {name: "Esdras", chapters: 10, subtitle: "El retorno del exilio"},
                {name: "Nehemías", chapters: 13, subtitle: "Reconstrucción de Jerusalén"},
                {name: "Ester", chapters: 10, subtitle: "La reina que salvó a su pueblo"},
                {name: "Job", chapters: 42, subtitle: "El sufrimiento y la soberanía de Dios"},
                {name: "Salmo", chapters: 150, subtitle: "Cantos de alabanza"},
                {name: "Proverbios", chapters: 31, subtitle: "Sabiduría práctica"},
                {name: "Eclesiastés", chapters: 12, subtitle: "Reflexiones sobre la vida"},
                {name: "Cantares", chapters: 8, subtitle: "El amor en poesía"},
                {name: "Isaías", chapters: 66, subtitle: "Profecías mesiánicas"},
                {name: "Jeremías", chapters: 52, subtitle: "Lamentaciones por Judá"},
                {name: "Lamentaciones", chapters: 5, subtitle: "Elegías por Jerusalén"},
                {name: "Ezequiel", chapters: 48, subtitle: "Visiones proféticas"},
                {name: "Daniel", chapters: 12, subtitle: "Profecías apocalípticas"},
                {name: "Oseas", chapters: 14, subtitle: "El amor redentor de Dios"},
                {name: "Joel", chapters: 3, subtitle: "El día del Señor"},
                {name: "Amós", chapters: 9, subtitle: "Justicia social"},
                {name: "Abdías", chapters: 1, subtitle: "Juicio contra Edom"},
                {name: "Jonás", chapters: 4, subtitle: "Misión a Nínive"},
                {name: "Miqueas", chapters: 7, subtitle: "Justicia, misericordia y humildad"},
                {name: "Nahum", chapters: 3, subtitle: "Caída de Nínive"},
                {name: "Habacuc", chapters: 3, subtitle: "Fe en medio del sufrimiento"},
                {name: "Sofonías", chapters: 3, subtitle: "El día de la ira"},
                {name: "Hageo", chapters: 2, subtitle: "Reconstrucción del templo"},
                {name: "Zacarías", chapters: 14, subtitle: "Profecías mesiánicas"},
                {name: "Malaquías", chapters: 4, subtitle: "El mensajero de Dios"}
            ],
            newTestament: [
                {name: "Mateo", chapters: 28, subtitle: "El evangelio del reino"},
                {name: "Marcos", chapters: 16, subtitle: "El evangelio del siervo"},
                {name: "Lucas", chapters: 24, subtitle: "El evangelio del Salvador"},
                {name: "Juan", chapters: 21, subtitle: "El evangelio de la vida eterna"},
                {name: "Hechos", chapters: 28, subtitle: "Historia de la iglesia primitiva"},
                {name: "Romanos", chapters: 16, subtitle: "La justificación por la fe"},
                {name: "1 Corintios", chapters: 16, subtitle: "Problemas en la iglesia"},
                {name: "2 Corintios", chapters: 13, subtitle: "El ministerio de Pablo"},
                {name: "Gálatas", chapters: 6, subtitle: "Libertad en Cristo"},
                {name: "Efesios", chapters: 6, subtitle: "La iglesia como cuerpo de Cristo"},
                {name: "Filipenses", chapters: 4, subtitle: "Gozo en Cristo"},
                {name: "Colosenses", chapters: 4, subtitle: "La supremacía de Cristo"},
                {name: "1 Tesalonicenses", chapters: 5, subtitle: "La segunda venida"},
                {name: "2 Tesalonicenses", chapters: 3, subtitle: "Preparación para el fin"},
                {name: "1 Timoteo", chapters: 6, subtitle: "Consejos a un joven pastor"},
                {name: "2 Timoteo", chapters: 4, subtitle: "El último encargo de Pablo"},
                {name: "Tito", chapters: 3, subtitle: "Organización de la iglesia"},
                {name: "Filemón", chapters: 1, subtitle: "Perdón y reconciliación"},
                {name: "Hebreos", chapters: 13, subtitle: "La superioridad de Cristo"},
                {name: "Santiago", chapters: 5, subtitle: "La fe en acción"},
                {name: "1 Pedro", chapters: 5, subtitle: "Sufrimiento y esperanza"},
                {name: "2 Pedro", chapters: 3, subtitle: "Conocimiento de Cristo"},
                {name: "1 Juan", chapters: 5, subtitle: "Comunión con Dios"},
                {name: "2 Juan", chapters: 1, subtitle: "Caminar en la verdad"},
                {name: "3 Juan", chapters: 1, subtitle: "Hospitalidad cristiana"},
                {name: "Judas", chapters: 1, subtitle: "Contender por la fe"},
                {name: "Apocalipsis", chapters: 22, subtitle: "Revelación del fin"}
            ]
        };

        // Usar los datos de ejemplo de versículos
        const verseData = window.verseData || {};

        // Referencias a elementos del DOM
        const versesContainer = document.getElementById('verses-container');
        const bookSelect = document.getElementById('book-select');
        const chapterSelect = document.getElementById('chapter-select');
        const verseInput = document.getElementById('verse-select'); // Cambiado a verseInput para el input
        const testamentSelect = document.getElementById('testament-select');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const randomBtn = document.getElementById('random-btn');
        const todayBtn = document.getElementById('today-btn');
        const searchInput = document.getElementById('search-input');
        const chapterTitle = document.getElementById('chapter-title');
        const chapterSubtitle = document.getElementById('chapter-subtitle');
        const dailyVerseIndicator = document.getElementById('daily-verse-indicator');
        const dailyVerseLabel = document.getElementById('daily-verse-label');

        let currentBookIndex = 0;
        let currentChapter = 1;
        let currentTestament = 'old'; // 'old' o 'new'

        // Función para cargar los libros en el selector de libros
        function loadBooks() {
            bookSelect.innerHTML = '';
            const testamentBooks = bibleData[currentTestament + 'Testament'];
            testamentBooks.forEach((book, index) => {
                const option = document.createElement('option');
                option.value = book.name;
                option.textContent = book.name;
                bookSelect.appendChild(option);
            });
            bookSelect.value = testamentBooks[currentBookIndex].name; // Seleccionar el libro actual
            loadChapters();
        }

        // Función para cargar los capítulos en el selector de capítulos
        function loadChapters() {
            chapterSelect.innerHTML = '';
            const selectedBookName = bookSelect.value;
            const testamentBooks = bibleData[currentTestament + 'Testament'];
            const book = testamentBooks.find(b => b.name === selectedBookName);

            if (book) {
                for (let i = 1; i <= book.chapters; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `Capítulo ${i}`;
                    chapterSelect.appendChild(option);
                }
                chapterSelect.value = currentChapter; // Seleccionar el capítulo actual
                updateVerseInputMax();
                displayChapter();
            } else {
                versesContainer.innerHTML = '<p class="neon-red">No se encontraron datos para este libro.</p>';
                chapterTitle.textContent = 'Libro no encontrado';
                chapterSubtitle.textContent = '';
                verseInput.max = 1;
                verseInput.value = 1;
            }
        }

        // Función para actualizar el valor máximo del input de versículo
        function updateVerseInputMax() {
            const selectedBookName = bookSelect.value;
            const selectedChapter = parseInt(chapterSelect.value);
            if (verseData[selectedBookName] && verseData[selectedBookName][selectedChapter]) {
                const maxVerses = verseData[selectedBookName][selectedChapter].length;
                verseInput.max = maxVerses;
                if (parseInt(verseInput.value) > maxVerses) {
                    verseInput.value = 1; // Reset to 1 if current value is out of bounds
                }
            } else {
                verseInput.max = 1; // Default to 1 if no data
                verseInput.value = 1;
            }
        }

        // Función para mostrar los versículos de un capítulo
        function displayChapter(highlightVerse = null) {
            versesContainer.innerHTML = '';
            const selectedBookName = bookSelect.value;
            const selectedChapter = parseInt(chapterSelect.value);
            
            const bookInfo = bibleData[currentTestament + 'Testament'].find(b => b.name === selectedBookName);
            chapterTitle.textContent = `${selectedBookName} - Capítulo ${selectedChapter}`;
            chapterSubtitle.textContent = bookInfo ? bookInfo.subtitle : '';

            const verses = verseData[selectedBookName] ? verseData[selectedBookName][selectedChapter] : [];

            if (verses && verses.length > 0) {
                verses.forEach((verseText, index) => {
                    const verseNumber = index + 1;
                    const verseDiv = document.createElement('div');
                    verseDiv.classList.add('verse');
                    if (highlightVerse && verseNumber === highlightVerse) {
                        verseDiv.classList.add('daily-verse-highlight');
                    }

                    const numberSpan = document.createElement('span');
                    numberSpan.classList.add('verse-number');
                    numberSpan.textContent = verseNumber + "."; // Añade el número del versículo

                    const textSpan = document.createElement('span');
                    textSpan.classList.add('verse-text');
                    textSpan.textContent = verseText;

                    verseDiv.appendChild(numberSpan);
                    verseDiv.appendChild(textSpan);
                    versesContainer.appendChild(verseDiv);
                });

                // Scroll to the highlighted verse if it exists
                if (highlightVerse) {
                    const highlightedElement = versesContainer.querySelector(`.verse:nth-child(${highlightVerse})`);
                    if (highlightedElement) {
                        highlightedElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }

            } else {
                versesContainer.innerHTML = '<p class="neon-red">No se encontraron versículos para este capítulo.</p>';
            }
        }

        // Función para ir al capítulo anterior
        function goToPrevChapter() {
            const testamentBooks = bibleData[currentTestament + 'Testament'];
            const currentBook = testamentBooks[currentBookIndex];

            if (currentChapter > 1) {
                currentChapter--;
            } else {
                // Si es el primer capítulo del libro actual, ir al último capítulo del libro anterior
                if (currentBookIndex > 0) {
                    currentBookIndex--;
                    const prevBook = testamentBooks[currentBookIndex];
                    currentChapter = prevBook.chapters;
                } else {
                    // Si es el primer libro del testamento, ir al último libro del testamento anterior (si existe)
                    if (currentTestament === 'new') {
                        currentTestament = 'old';
                        const oldTestamentBooks = bibleData.oldTestament;
                        currentBookIndex = oldTestamentBooks.length - 1;
                        currentChapter = oldTestamentBooks[currentBookIndex].chapters;
                    } else {
                        // Ya está en Génesis 1, no hay más capítulos anteriores
                        alert("Ya estás en el primer capítulo de la Biblia.");
                        return;
                    }
                }
            }
            // Actualizar selectores y mostrar el capítulo
            testamentSelect.value = currentTestament;
            loadBooks(); // Esto actualizará bookSelect y chapterSelect
            bookSelect.value = bibleData[currentTestament + 'Testament'][currentBookIndex].name;
            loadChapters();
            chapterSelect.value = currentChapter;
            updateVerseInputMax();
            displayChapter();
        }

        // Función para ir al capítulo siguiente
        function goToNextChapter() {
            const testamentBooks = bibleData[currentTestament + 'Testament'];
            const currentBook = testamentBooks[currentBookIndex];

            if (currentChapter < currentBook.chapters) {
                currentChapter++;
            } else {
                // Si es el último capítulo del libro actual, ir al primer capítulo del siguiente libro
                if (currentBookIndex < testamentBooks.length - 1) {
                    currentBookIndex++;
                    currentChapter = 1;
                } else {
                    // Si es el último libro del testamento, ir al primer libro del siguiente testamento (si existe)
                    if (currentTestament === 'old') {
                        currentTestament = 'new';
                        currentBookIndex = 0;
                        currentChapter = 1;
                    } else {
                        // Ya está en Apocalipsis 22, no hay más capítulos siguientes
                        alert("Ya estás en el último capítulo de la Biblia.");
                        return;
                    }
                }
            }
            // Actualizar selectores y mostrar el capítulo
            testamentSelect.value = currentTestament;
            loadBooks(); // Esto actualizará bookSelect y chapterSelect
            bookSelect.value = bibleData[currentTestament + 'Testament'][currentBookIndex].name;
            loadChapters();
            chapterSelect.value = currentChapter;
            updateVerseInputMax();
            displayChapter();
        }

        // Función para generar un versículo aleatorio
        function getRandomVerse() {
            const allBooks = Object.keys(verseData);
            const randomBookName = allBooks[Math.floor(Math.random() * allBooks.length)];

            const bookChapters = verseData[randomBookName];
            const allChapters = Object.keys(bookChapters);
            const randomChapterNumber = parseInt(allChapters[Math.floor(Math.random() * allChapters.length)]);

            const chapterVerses = bookChapters[randomChapterNumber];
            const randomVerseIndex = Math.floor(Math.random() * chapterVerses.length);
            const randomVerseText = chapterVerses[randomVerseIndex];

            // Encontrar el testamento y el índice del libro para actualizar los selectores
            let foundTestament = '';
            let foundBookIndex = -1;
            for (const testamentKey in bibleData) {
                const bookFound = bibleData[testamentKey].findIndex(b => b.name === randomBookName);
                if (bookFound !== -1) {
                    foundTestament = testamentKey.replace('Testament', '');
                    foundBookIndex = bookFound;
                    break;
                }
            }

            currentTestament = foundTestament;
            currentBookIndex = foundBookIndex;
            currentChapter = randomChapterNumber;

            testamentSelect.value = currentTestament;
            loadBooks();
            bookSelect.value = randomBookName;
            loadChapters();
            chapterSelect.value = randomChapterNumber;
            verseInput.value = randomVerseIndex + 1; // Versículo es 1-based

            displayChapter(randomVerseIndex + 1); // Highlight the random verse
        }

        // Función para el versículo del día (se mantiene durante 24 horas)
        function getDailyVerse() {
            const today = new Date().toDateString();
            let dailyVerse = JSON.parse(localStorage.getItem('dailyVerse'));

            if (!dailyVerse || dailyVerse.date !== today) {
                // Generar un nuevo versículo aleatorio si no hay uno guardado o es de un día anterior
                const allBooks = Object.keys(verseData);
                let randomBookName;
                let bookChapters;
                let randomChapterNumber;
                let chapterVerses;
                let randomVerseIndex;

                // Asegurarse de que el versículo exista en la estructura de verseData
                do {
                    randomBookName = allBooks[Math.floor(Math.random() * allBooks.length)];
                    bookChapters = verseData[randomBookName];
                    const allChapters = Object.keys(bookChapters);
                    randomChapterNumber = parseInt(allChapters[Math.floor(Math.random() * allChapters.length)]);
                    chapterVerses = bookChapters[randomChapterNumber];
                    randomVerseIndex = Math.floor(Math.random() * chapterVerses.length);
                } while (!randomBookName || !bookChapters || !randomChapterNumber || !chapterVerses || randomVerseIndex === undefined);

                dailyVerse = {
                    date: today,
                    book: randomBookName,
                    chapter: randomChapterNumber,
                    verseIndex: randomVerseIndex,
                    verseText: chapterVerses[randomVerseIndex]
                };
                localStorage.setItem('dailyVerse', JSON.stringify(dailyVerse));
            }

            // Actualizar la interfaz con el versículo del día
            const { book, chapter, verseIndex } = dailyVerse;

            // Encontrar el testamento y el índice del libro
            let foundTestament = '';
            let foundBookIndex = -1;
            for (const testamentKey in bibleData) {
                const bookFound = bibleData[testamentKey].findIndex(b => b.name === book);
                if (bookFound !== -1) {
                    foundTestament = testamentKey.replace('Testament', '');
                    foundBookIndex = bookFound;
                    break;
                }
            }

            currentTestament = foundTestament;
            currentBookIndex = foundBookIndex;
            currentChapter = chapter;

            testamentSelect.value = currentTestament;
            loadBooks();
            bookSelect.value = book;
            loadChapters();
            chapterSelect.value = chapter;
            verseInput.value = verseIndex + 1; // Versículo es 1-based

            displayChapter(verseIndex + 1); // Highlight the daily verse

            dailyVerseLabel.textContent = `Versículo del día: ${book} ${chapter}:${verseIndex + 1}`;
            dailyVerseIndicator.classList.add('daily-verse-highlight'); // Add initial highlight if not there
            setTimeout(() => dailyVerseIndicator.classList.remove('daily-verse-highlight'), 2000); // Remove after animation
        }

        // Función para buscar versículos
        function searchVerses() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            if (searchTerm.length < 3) { // Require at least 3 characters for search
                displayChapter(); // Revert to displaying current chapter if search term is too short
                return;
            }

            versesContainer.innerHTML = '';
            chapterTitle.textContent = `Resultados de búsqueda para "${searchTerm}"`;
            chapterSubtitle.textContent = '';

            let resultsFound = false;

            for (const bookName in verseData) {
                for (const chapterNum in verseData[bookName]) {
                    const verses = verseData[bookName][chapterNum];
                    verses.forEach((verseText, index) => {
                        if (verseText.toLowerCase().includes(searchTerm)) {
                            resultsFound = true;
                            const verseNumber = index + 1;
                            const verseDiv = document.createElement('div');
                            verseDiv.classList.add('verse');

                            const numberSpan = document.createElement('span');
                            numberSpan.classList.add('verse-number');
                            numberSpan.textContent = `${bookName} ${chapterNum}:${verseNumber}.`; // Show full reference

                            const textSpan = document.createElement('span');
                            textSpan.classList.add('verse-text');
                            textSpan.innerHTML = verseText.replace(new RegExp(searchTerm, 'gi'), match => `<span class="neon-green">${match}</span>`);

                            verseDiv.appendChild(numberSpan);
                            verseDiv.appendChild(textSpan);
                            versesContainer.appendChild(verseDiv);
                        }
                    });
                }
            }

            if (!resultsFound) {
                versesContainer.innerHTML = `<p class="neon-red">No se encontraron versículos para "${searchTerm}".</p>`;
            }
        }

        // Event Listeners
        testamentSelect.addEventListener('change', (event) => {
            currentTestament = event.target.value;
            currentBookIndex = 0; // Reset book index when testament changes
            currentChapter = 1; // Reset chapter when testament changes
            loadBooks();
            loadChapters();
        });

        bookSelect.addEventListener('change', () => {
            const selectedBookName = bookSelect.value;
            const testamentBooks = bibleData[currentTestament + 'Testament'];
            currentBookIndex = testamentBooks.findIndex(b => b.name === selectedBookName);
            currentChapter = 1; // Reset chapter when book changes
            chapterSelect.value = currentChapter; // Update chapter select
            loadChapters();
        });

        chapterSelect.addEventListener('change', (event) => {
            currentChapter = parseInt(event.target.value);
            updateVerseInputMax();
            displayChapter();
        });

        verseInput.addEventListener('change', () => {
            const targetVerse = parseInt(verseInput.value);
            displayChapter(targetVerse);
        });

        prevBtn.addEventListener('click', goToPrevChapter);
        nextBtn.addEventListener('click', goToNextChapter);
        randomBtn.addEventListener('click', getRandomVerse);
        todayBtn.addEventListener('click', getDailyVerse);
        searchInput.addEventListener('input', searchVerses); // Live search

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            loadBooks(); // Carga libros del testamento por defecto (Antiguo)
            getDailyVerse(); // Muestra el versículo del día al cargar la página
        });
    </script>
</body>
</html>